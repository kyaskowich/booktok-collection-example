(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612,7809],{17809:()=>{},33329:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(66284),a=n(61801),i=n(92594),o=n(19863),c=(0,o.I4)("div",{paddingBottom:"$gr4",zIndex:"1","@xxs":{paddingBottom:"$gr2"},"@xs":{paddingBottom:"$gr2"},"@sm":{paddingBottom:"$gr3"},"@md":{paddingBottom:"$gr3"}}),l=(0,o.I4)(i.A,{display:"flex",width:"auto",position:"relative",padding:"$gr2 0",zIndex:"1",".canopy-grid-column":{marginLeft:"$gr4","@xxs":{marginLeft:"$gr2"},"@xs":{marginLeft:"$gr2"},"@sm":{marginLeft:"$gr3"},"@md":{marginLeft:"$gr3"},"&:first-child":{marginLeft:"0"}}});n(14232);var s=n(37876),u=n(92091),d=function(e){var t,n=e.children,a=(t={default:6},(0,r.A)(t,u.V.xl,5),(0,r.A)(t,u.V.lg,4),(0,r.A)(t,u.V.md,4),(0,r.A)(t,u.V.sm,3),(0,r.A)(t,u.V.xs,2),t);return(0,s.jsx)(l,{breakpointCols:a,className:"canopy-grid",columnClassName:"canopy-grid-column",children:n})};d.Item=function(e){var t=e.item;return t?(0,s.jsx)(c,{children:(0,s.jsx)(a.A,{resource:t},t.id)}):(0,s.jsx)(s.Fragment,{})};let f=d},50920:e=>{"use strict";e.exports=JSON.parse('[{"label":"Author","slug":"author","values":[{"value":"Fredrik Backman","slug":"fredrik-backman","doc_count":3,"docs":[3,15,18]},{"value":"Agatha Christie","slug":"agatha-christie","doc_count":1,"docs":[11]},{"value":"Amber Tamblyn","slug":"amber-tamblyn","doc_count":1,"docs":[16]},{"value":"Bryn Greenwood","slug":"bryn-greenwood","doc_count":1,"docs":[9]},{"value":"Chelsea G. Summers","slug":"chelsea-g-summers","doc_count":1,"docs":[1]},{"value":"George Orwell","slug":"george-orwell","doc_count":1,"docs":[0]},{"value":"Hanya Yanagihara","slug":"hanya-yanagihara","doc_count":1,"docs":[2]},{"value":"Jen Beagin","slug":"jen-beagin","doc_count":1,"docs":[22]},{"value":"Jennifer Niven","slug":"jennifer-niven","doc_count":1,"docs":[8]},{"value":"Jennifer Saint","slug":"jennifer-saint","doc_count":1,"docs":[17]},{"value":"Jenny Lee","slug":"jenny-lee","doc_count":1,"docs":[13]},{"value":"Khaled Hosseini","slug":"khaled-hosseini","doc_count":1,"docs":[6]},{"value":"Leo Tolstoy","slug":"leo-tolstoy","doc_count":1,"docs":[14]},{"value":"Lisa Taddeo","slug":"lisa-taddeo","doc_count":1,"docs":[12]},{"value":"Megan Nolan","slug":"megan-nolan","doc_count":1,"docs":[7]},{"value":"Natalie Haynes","slug":"natalie-haynes","doc_count":1,"docs":[5]},{"value":"Sally Rooney","slug":"sally-rooney","doc_count":1,"docs":[19]},{"value":"Sohn Won-Pyung","slug":"sohn-won-pyung","doc_count":1,"docs":[10]},{"value":"Steven L. Peck","slug":"steven-l-peck","doc_count":1,"docs":[4]},{"value":"Tiffany McDaniel","slug":"tiffany-mcdaniel","doc_count":1,"docs":[21]},{"value":"Toshikazu Kawaguchi","slug":"toshikazu-kawaguchi","doc_count":1,"docs":[20]}]},{"label":"Demographic","slug":"demographic","values":[{"value":"Adult","slug":"adult","doc_count":19,"docs":[0,1,2,3,4,5,7,9,11,12,14,15,16,17,18,19,20,21,22]},{"value":"Young Adult","slug":"young-adult","doc_count":4,"docs":[6,8,10,13]}]}]')},60258:e=>{"use strict";e.exports=JSON.parse('[{"id":0,"label":"1984","metadata":"George Orwell Adult"},{"id":1,"label":"A Certain Hunger","metadata":"Chelsea G. Summers Adult"},{"id":2,"label":"A Little Life","metadata":"Hanya Yanagihara Adult"},{"id":3,"label":"A Man Called Ove","metadata":"Fredrik Backman Adult"},{"id":4,"label":"A Short Stay in Hell","metadata":"Steven L. Peck Adult"},{"id":5,"label":"A Thousand Ships","metadata":"Natalie Haynes Adult"},{"id":6,"label":"A Thousand Splendid Suns","metadata":"Khaled Hosseini Young Adult"},{"id":7,"label":"Acts of Desperation","metadata":"Megan Nolan Adult"},{"id":8,"label":"All the Bright Places","metadata":"Jennifer Niven Young Adult"},{"id":9,"label":"All the Ugly and Wonderful Things","metadata":"Bryn Greenwood Adult"},{"id":10,"label":"Almond","metadata":"Sohn Won-Pyung Young Adult"},{"id":11,"label":"And Then There Were None","metadata":"Agatha Christie Adult"},{"id":12,"label":"Animal","metadata":"Lisa Taddeo Adult"},{"id":13,"label":"Anna K: A Love Story (Anna K #1)","metadata":"Jenny Lee Young Adult"},{"id":14,"label":"Anna Karenina","metadata":"Leo Tolstoy Adult"},{"id":15,"label":"Anxious People","metadata":"Fredrik Backman Adult"},{"id":16,"label":"Any Man","metadata":"Amber Tamblyn Adult"},{"id":17,"label":"Ariadne","metadata":"Jennifer Saint Adult"},{"id":18,"label":"Beartown (Beartown #1)","metadata":"Fredrik Backman Adult"},{"id":19,"label":"Beautiful World Where Are You","metadata":"Sally Rooney Adult"},{"id":20,"label":"Before the Coffee Gets Cold (Before the Coffee Gets Cold #1)","metadata":"Toshikazu Kawaguchi Adult"},{"id":21,"label":"Betty","metadata":"Tiffany McDaniel Adult"},{"id":22,"label":"Big Swiss","metadata":"Jen Beagin Adult"}]')},61801:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var r=n(33318),a=n(29707),i=n(66284),o=n(19863),c=(0,o.I4)("div",{padding:"$gr3 0 0"}),l=(0,o.I4)("div",{backgroundColor:"var(--gray-3)",width:"100%",height:"100%",overflowY:"hidden",borderRadius:"3px",transition:"$canopyAll"}),s=(0,o.I4)("div",{display:"flex",width:"100%",position:"relative",flexGrow:1,flexShrink:0,maxWidth:"275px",img:{width:"100%",height:"100%",objectFit:"cover"},a:(0,i.A)({display:"flex",flexDirection:"column",width:"100%",color:"var(--gray-12)",textDecoration:"none !important",transition:"$canopyAll"},"&:hover, &:focus",(0,i.A)({color:"var(--accent-11)"},"".concat(l),{transform:"scale3d(1.03, 1.03, 1.03)"}))}),u=n(61956),d=n(96920),f=n(59788),g=n(95272),h=n(293),p=(0,o.I4)("img",(0,i.A)({position:"relative",zIndex:"1",width:"100%",height:"100%",objectFit:"contain",transition:"$canopyAll",opacity:0,color:"transparent"},"&.loaded",{opacity:1})),v=(0,o.I4)("figure",{backgroundColor:"var(--gray-3)",display:"flex",width:"100%",height:"100%",padding:"0",margin:"0",position:"relative",overflow:"hidden",zIndex:"0",borderRadius:"3px",transition:"$canopyAll"}),m=n(14232),y=n(49995),x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"600,",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"full";if(!e)return null;if(Array.isArray(e)&&(e=e[0]),!e.service)return e.id;if(!Array.isArray(e.service)){if(e.service["@id"])return"".concat(e.service["@id"],"/").concat(n,"/").concat(t,"/0/default.jpg");if(e.service.id)return"".concat(e.service.id,"/").concat(n,"/").concat(t,"/0/default.jpg")}return e.service[0]["@id"]?"".concat(e.service[0]["@id"],"/").concat(n,"/").concat(t,"/0/default.jpg"):"".concat(e.service[0].id,"/").concat(n,"/").concat(t,"/0/default.jpg")},b=n(37876);let j=function(e){var t=e.alt,n=e.resource,r=e.region,a=void 0===r?"full":r,i=e.size,o=void 0===i?"400,":i,c=e.isCover,l=(0,m.useState)(),s=l[0],u=l[1],d=(0,m.useState)(!1),f=d[0],g=d[1],h=(0,m.useRef)(null);return(0,m.useEffect)(function(){var e;u(x(n,o,a)),null!=h&&h.current&&null!=h&&null!=(e=h.current)&&e.complete&&g(!0)},[]),(0,b.jsx)(v,{children:(0,b.jsx)(p,{alt:t,src:s,ref:h,style:void 0!==c&&c?{objectFit:"cover",objectPosition:"50% 50%",width:"100%",height:"100%"}:{},onLoad:function(){return g(!0)},className:(0,y.A)("source",f&&"loaded")})})};var A=n(51633),w=n(38),S=n(50634);let O=m.memo(function(e){var t,n=e.resource,i=1,o=n.label,p=n.homepage,v=n.thumbnail,m=Array.isArray(v)&&v.length>0,y=m?v[0].id:"images/image.svg",x=m?v[0].width:void 0,O=m?v[0].height:void 0;x&&O&&(i=x/O);var P=(0,S.Wx)(),C=P.ref,k=P.inView,$=(0,w.p)(o);return(0,b.jsx)(s,{as:a.Box,ref:C,children:(0,b.jsx)(a.Card,{size:"2",style:{width:"100%"},variant:"classic",asChild:!0,children:(0,b.jsxs)(h.A,{href:p&&null!=(t=p[0])&&t.id?p[0].id:"",children:[(0,b.jsx)(a.Inset,{clip:"padding-box",side:"top","data-testid":"canopy-card-inset","data-resource":y,children:(0,b.jsx)(r.b,{ratio:i,children:(0,b.jsx)(l,{children:(0,b.jsx)(u.x,{transition:{duration:1},children:k&&n&&(0,b.jsx)(d.F,{features:f.l,children:(0,b.jsx)(g.m.div,{style:{height:"100%"},initial:{opacity:0},animate:{opacity:1},children:(0,b.jsx)(j,{resource:m?v:[{id:y}],alt:$})})})})})})}),(0,b.jsx)(a.Text,{size:"2",asChild:!0,children:(0,b.jsx)(c,{children:(0,b.jsx)(A.Label,{label:o})})})]})})})})},68732:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(78705)}])},78705:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__N_SSG:()=>ef,default:()=>eg});var r=n(14232),a=n(19843),i=n(66284),o=n(37876);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,i.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s={facetsActive:[]},u=(0,r.createContext)(void 0);function d(e,t){if("updateFacetsActive"===t.type)return l(l({},e),{},{facetsActive:t.facetsActive})}function f(e){var t=e.initialState,n=e.children,a=(0,r.useReducer)(d,void 0===t?s:t),i=a[0],c=a[1];return(0,o.jsx)(u.Provider,{value:{facetsDispatch:c,facetsState:i},children:n})}function g(){var e=(0,r.useContext)(u);if(void 0===e)throw Error("useFacetsState must be used within a FacetsProvider");return e}var h=n(29707),p=n(45794),v=n(19863),m=(0,v.I4)("span",{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",top:"-$gr1",right:"$gr2",width:"$gr3",height:"$gr3",fontSize:"$gr1",color:"var(--accent-1)",backgroundColor:"var(--accent-12)",borderRadius:"50%"}),y=(0,v.I4)(h.Dialog.Trigger,{position:"relative",right:"0",boxShadow:"none",transition:"$canopySlideIn"}),x=(0,v.I4)("div",{display:"flex",position:"fixed",left:"0",zIndex:"5",width:"100%",variants:{isScrolling:{true:(0,i.A)({},"".concat(y),{right:"50%",transform:"translate(50%)",backfaceVisibility:"hidden",webkitFontSmoothing:"subpixel-antialiased",boxShadow:"var(--shadow-5)"})}}}),b=n(32639),j=n(82454),A=n(5259),w=n(55524);let S=function(e){var t=(0,r.useState)(0),n=t[0],a=t[1];return(0,r.useEffect)(function(){var t=function(){a(window.pageYOffset),e.current&&a(window.pageYOffset-(null==e?void 0:e.current.offsetTop))};return window.addEventListener("scroll",t),t(),function(){return window.removeEventListener("scroll",t)}},[e]),n},O=function(){var e=r.useState(!1),t=(0,p.A)(e,2),n=t[0],i=t[1],c=r.useRef(null),l=S(c),s=Array.from(g().facetsState.facetsActive.keys()).filter(function(e){return"q"!==e}).length;return(0,r.useEffect)(function(){return i(l>w.$A-100)},[l,w.$A]),(0,o.jsx)(x,{isScrolling:n,ref:c,children:(0,o.jsx)(a.A,{containerType:"wide",children:(0,o.jsx)(h.Flex,{justify:"end",children:(0,o.jsx)(y,{children:(0,o.jsxs)(b.A,{size:"3",children:[(0,j.qP)("searchFilter")," ",(0,o.jsx)(A.LMN,{}),s>0&&(0,o.jsx)(m,{children:s})]})})})})})};var P=n(18221),C=(0,v.I4)("div",{display:"flex",flexDirection:"column",flexWrap:"nowrap",width:"100%",overflow:"scroll"}),k=n(50920),$=(0,v.I4)(P.l9,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"$gr2 0",backgroundColor:"transparent",border:"none",cursor:"pointer",borderTop:"1px solid var(--gray-4)",fontSize:"$gr3","> span":{display:"flex",alignItems:"center",gap:"$gr1"},"&:hover, &:focus":{color:"var(--accent-11)"},svg:{transition:"$canopyAll",transform:"rotate(-90deg)",color:"var(--gray-10)"},"&[aria-expanded='true']":{color:"var(--gray-12) !important",fontWeight:"800",svg:{color:"var(--gray-12) !important",transform:"rotate(0deg)"}}}),I=(0,v.I4)(P.UC,{padding:"$gr1 0 $gr4"}),_=(0,v.I4)(P.Y9,{}),D=(0,v.I4)(P.q7,{"&:first-child":(0,i.A)({},"".concat($),{border:"none"})}),L=n(74003),T=(0,v.I4)("label",{transition:"$canopyAll",cursor:"pointer",fontWeight:"500",variants:{isChecked:{true:{color:"var(--gray-12) !important",fontWeight:"700"}}},"&:hover, &:focus":{color:"var(--accent-11)"},span:{color:"var(--gray-10) !important",fontSize:"$gr1"}}),E=(0,v.I4)(L.bL,{position:"relative",zIndex:"0",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"$gr3",height:"$gr3",margin:"0 $gr1 0 0",background:"var(--gray-3)",boxShadow:"inset var(--shadow-2)",border:"none",borderRadius:"50%",cursor:"pointer",transition:"$canopyAll",flexShrink:"0","&::before":{position:"absolute",width:"100%",height:"100%",content:"",background:"linear-gradient(-45deg, var(--accent-11), var(--accent-8))",opacity:"0",borderRadius:"50%",transition:"$canopyAll",zIndex:"0"},"&[aria-checked='true']":{"&::before":{opacity:"1"}}}),F=(0,v.I4)(L.C1,{position:"absolute",zIndex:"1",color:"var(--accent-1)",textShadow:"1px 1px 2px var(--accent-a12)"}),z=(0,v.I4)("span",{display:"flex",margin:"0 0 $gr1",color:"var(--gray-11)",fontSize:"$gr2","&:last-child":{margin:"0"}});let B=function(e){var t=e.active,n=e.facet,r=e.identifier,a=e.option,i=g(),c=i.facetsDispatch,l=i.facetsState.facetsActive;return(0,o.jsxs)(z,{children:[(0,o.jsx)(E,{value:a.value,id:r,checked:t,onCheckedChange:function(e){l.delete(n),e&&l.append(n,a.slug),c({type:"updateFacetsActive",facetsActive:l})},children:(0,o.jsx)(F,{asChild:!0,children:(0,o.jsx)(A.Srz,{})})}),(0,o.jsxs)(T,{htmlFor:r,isChecked:t,children:[a.value," ",(0,o.jsxs)("span",{children:["(",a.doc_count,")"]})]})]})},R=function(e){var t=e.label,n=e.slug,a=e.values,i=g().facetsState.facetsActive,c=null==i?void 0:i.toString(),l={slug:"",value:(0,j.qP)("searchFilterAny")},s=(0,r.useState)({slug:"",value:(0,j.qP)("searchFilterAny")}),u=s[0],d=s[1];return(0,r.useEffect)(function(){var e,t=null==i?void 0:i.get(n);d(t?{slug:t,value:null==(e=a.find(function(e){return e.slug===t}))?void 0:e.value}:l)},[i,c,n,a]),(0,o.jsxs)(D,{value:n,children:[(0,o.jsx)(_,{asChild:!0,children:(0,o.jsxs)($,{children:[(0,o.jsxs)("span",{children:[t," ",(0,o.jsx)(A.D3D,{})]}),(0,o.jsx)("span",{children:u.value})]})}),(0,o.jsx)(I,{children:a.map(function(e,t){var r="".concat(n,"-").concat(e.slug,"-").concat(t);return(0,o.jsx)(B,{active:u.slug===e.slug,facet:n,identifier:r,option:e},r)})})]})};var N=n(89099);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){(0,i.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let U=function(){var e=g(),t=e.facetsState,n=e.facetsDispatch,a=t.facetsActive,i=(0,N.useRouter)(),c=function(){i.push({pathname:"/search",query:a.toString()})};return(0,o.jsx)(h.Dialog.Content,{children:(0,o.jsxs)(C,{children:[(0,o.jsx)(h.Flex,{mb:"3",align:"center",justify:"between",asChild:!0,children:(0,o.jsxs)("header",{children:[(0,o.jsx)(h.Dialog.Title,{as:"h3",mb:"0",size:"4",children:(0,o.jsx)("span",{children:(0,j.qP)("searchFilter")})}),(0,o.jsx)(h.Dialog.Close,{"aria-label":(0,j.qP)("searchFilterClose"),children:(0,o.jsx)(h.IconButton,{variant:"soft",size:"2",style:{cursor:"pointer"},children:(0,o.jsx)(A.MKb,{})})})]})}),(0,o.jsx)("div",{children:(0,o.jsx)(P.bL,{type:"single",collapsible:!0,children:k.map(function(e){return(0,r.createElement)(R,W(W({},e),{},{key:e.slug}))})})}),(0,o.jsx)(h.Flex,{mt:"5",style:{justifyContent:"space-between"},asChild:!0,children:(0,o.jsxs)("footer",{children:[(0,o.jsx)(h.Dialog.Close,{children:(0,o.jsx)(b.A,{variant:"soft",onClick:function(){k.forEach(function(e){return a.delete(e.slug)}),n({type:"updateFacetsActive",facetsActive:a}),c()},children:(0,j.qP)("searchFilterClear")})}),(0,o.jsx)(h.Dialog.Close,{children:(0,o.jsx)(b.A,{onClick:c,children:(0,j.qP)("searchFilterSubmit")})})]})})]})})};var Y=n(25534),G=function(){var e=g().facetsDispatch,t=(0,Y.nV)().canopyState.searchParams;return(0,r.useEffect)(function(){e({type:"updateFacetsActive",facetsActive:t})},[t,e]),(0,o.jsxs)(h.Dialog.Root,{children:[(0,o.jsx)(O,{}),(0,o.jsx)(U,{})]})};let J=function(){return(0,o.jsx)(f,{children:(0,o.jsx)(G,{})})};var M=n(9724),V=(0,v.I4)("div",{height:"$gr5",padding:"$gr4 0 $gr2","@sm":{height:"$gr5",padding:"$gr3 0 $gr2"},"#canopy-search-summary":{position:"relative",display:"block",fontSize:"$gr3",color:"var(--gray-11)",fontWeight:"500",padding:"$gr2 0","@sm":{fontSize:"$gr3"}}}),H=n(33329),K=n(70236),X=function(e){var t=new URL(e);return t.searchParams.delete("page"),[{id:t,type:"Collection"}]},Q=n(60258),Z=n(27420),ee=n(82851),et=n.n(ee),en=n(69776),er=function(e,t){var n=new en.A.Document(t);Q.forEach(function(e){return n.add(e)});var r=n.search(e).reduce(function(e,t){return(0,K.A)(new Set([].concat((0,K.A)(e),(0,K.A)(t.result))))},[]);return r.length>0?r:[]},ea=function(e,t,n,r){var a,i=t?er(t,r):Q.map(function(e){return e.id}),o=0===n.length?Z:(a=n.map(function(e){var t=k.find(function(t){return t.slug===e.label}).values.find(function(t){return t.slug===e.value});return null==t?void 0:t.docs}),Z.filter(function(e){return et().intersection.apply(et(),(0,K.A)(a)).includes(e.index)}));return i.filter(function(e){return o.some(function(t){return t.index===e})}).map(function(t){var n;return n=o.find(function(e){return e.index===t}),{id:n.id,type:"Manifest",label:n.label,thumbnail:n.thumbnail,homepage:[{id:"".concat(e,"/works/").concat(n.slug),type:"Text",label:n.label}]}})};function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(n),!0).forEach(function(t){(0,i.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ec=function(e){var t,n=e.params,r=e.baseUrl,a=e.flexSearch,i=k.map(function(e){return e.slug}).filter(function(e){return n.has(e)}).map(function(e){var t=n.get(e);return{label:e,value:t}}),o=null==n?void 0:n.get("q"),c=null==n?void 0:n.get("page"),l=new URL("".concat(r,"/search"));l.search=null==n?void 0:n.toString();var s=ea(r,o,i,a),u=Array.from(Array(Math.ceil(s.length/10)).keys()).map(function(e){var t=s.slice(10*e,10*(e+1)).map(function(e){return e.id});return{page:e+1,items:t}}),d=c?(t=parseInt(c),u.find(function(e){return e.page===t}).items.map(function(e){return s.find(function(t){return t.id===e})})):u.map(function(e){var t=new URL(l);return t.searchParams.append("page",e.page),{id:t.toString(),type:"Collection",label:{none:["Page ".concat(e.page," (").concat(e.items.length," Total)")]}}});return eo(eo({"@context":"https://iiif.io/api/presentation/3/context.json",id:l.toString(),type:"Collection",label:{none:[o||"All Results"]},items:d},c?{summary:{none:["".concat(s.length,"}")]}}:{summary:{none:["".concat(s.length)]}}),c&&{partOf:X(l)})};let el=function(e,t,n){var a=(0,r.useState)([]),i=a[0],o=a[1],c=(0,r.useState)(!1),l=c[0],s=c[1],u=(0,r.useState)(!0),d=u[0],f=u[1],g=(0,r.useState)(!1),h=g[0],p=g[1],v=(0,Y.nV)().canopyState.config,m=function(){o([]),s(!1),f(!0),p(!1)};return(0,r.useEffect)(function(){return m()},[n]),(0,r.useEffect)(function(){if(f(!0),s(!1),(null==e?void 0:e.length)>0&&e[t]){var n,r=ec({params:new URL(e[t]).searchParams,baseUrl:null==v?void 0:v.baseUrl,flexSearch:null==v||null==(n=v.search)?void 0:n.flexSearch}).items;o(function(e){return[].concat((0,K.A)(e),(0,K.A)(r))}),p(e.length>t),f(!1)}},[v,e,t]),{data:i,error:l,loading:d,more:h}},es=function(e){var t=e.pages,n=e.query,a=(0,r.useState)(0),i=a[0],c=a[1],l=el(t,i,n),s=l.data,u=l.loading,d=l.more;(0,r.useEffect)(function(){return c(0)},[n]);var f=(0,r.useRef)(),g=(0,r.useCallback)(function(e){!u&&(f.current&&f.current.disconnect(),f.current=new IntersectionObserver(function(e){e[0].isIntersecting&&d&&c(function(e){return e+1})}),e&&f.current.observe(e))},[u,d]);return(0,o.jsx)(H.A,{children:s.map(function(e,t){return s.length===t+1?(0,o.jsx)("span",{ref:s.length===t+1?g:void 0,children:(0,o.jsx)(H.A.Item,{item:e})},e.id):(0,o.jsx)("span",{children:(0,o.jsx)(H.A.Item,{item:e})},e.id)})})};var eu=n(51633),ed=n(14e3),ef=!0;let eg=function(){var e=(0,ed.useSearchParams)(),t=(0,r.useState)([]),n=t[0],i=t[1],c=(0,r.useState)(),l=c[0],s=c[1],u=r.useRef(null),d=(0,Y.nV)(),f=d.canopyDispatch,g=d.canopyState,p=g.config,v=g.searchSummary;return(0,r.useEffect)(function(){i([]),s(new URLSearchParams(e.toString()))},[e]),(0,r.useEffect)(function(){if(void 0!==l){f({searchParams:l,type:"updateSearchParams"});var e,t=null==p||null==(e=p.search)?void 0:e.flexSearch,n=ec({params:l,baseUrl:null==p?void 0:p.baseUrl,flexSearch:t}),r=n.items,a=n.summary;i(r.map(function(e){return e.id})),a&&f({type:"updateSearchSummary",searchSummary:a})}},[l,p]),(0,o.jsxs)(M.A,{children:[(0,o.jsxs)(V,{ref:u,children:[(0,o.jsx)(J,{}),(0,o.jsx)(a.A,{containerType:"wide",children:v&&(0,o.jsxs)(h.Text,{id:"canopy-search-summary",children:[(0,o.jsx)(eu.Summary,{summary:v})," ",(0,j.qP)("searchResults")]})})]}),(0,o.jsx)(a.A,{containerType:"wide",children:(0,o.jsx)(es,{pages:n,query:l})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8507,5587,888,814,9941,2160,7314,636,6593,8792],()=>t(68732)),_N_E=e.O()}]);